@import url("https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;600;700&family=Share+Tech+Mono&display=swap");

/* ─── Design tokens ─────────────────────────────────────────────────────────── */
:root {
  --font-ui: "Rajdhani", "Trebuchet MS", "Segoe UI", sans-serif;
  --font-mono: "Share Tech Mono", "Courier New", monospace;

  --bg-void: #06101a;
  --bg-dark: #0b1622;
  --bg-panel: #0e1d2e;
  --bg-glass: rgb(10 22 36 / 70%);

  --border-subtle: rgb(160 210 255 / 18%);
  --border-dim: rgb(120 175 230 / 12%);

  --text-bright: #e8f4ff;
  --text-primary: #c6dff5;
  --text-muted: rgb(140 185 228 / 75%);

  --accent-blue: #4c9de0;
  --accent-amber: #e8b84b;
  --accent-amber-glow: rgb(232 184 75 / 22%);
  --accent-green: #52cc7e;
  --accent-red: #d94848;

  font-family: var(--font-ui);
  color: var(--text-primary);
  background: var(--bg-dark);
}

* {
  box-sizing: border-box;
}

html,
body,
#app {
  width: 100%;
  height: var(--app-dynamic-height, 100dvh);
  min-height: var(--app-dynamic-height, 100dvh);
  margin: 0;
  overflow: hidden;
}

#app {
  position: relative;
  touch-action: manipulation;
}

canvas {
  display: block;
}

/* ─── Loading splash ─────────────────────────────────────────────────────────── */

.loading-splash {
  position: absolute;
  inset: 0;
  width: 100dvw;
  height: 100dvh;
  z-index: 20;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 24px;
  background:
    repeating-linear-gradient(
      0deg,
      rgb(0 0 0 / 0%) 0px,
      rgb(0 0 0 / 0%) 3px,
      rgb(0 12 24 / 18%) 3px,
      rgb(0 12 24 / 18%) 4px
    ),
    radial-gradient(
      ellipse 120% 90% at 50% 38%,
      rgb(10 22 40) 0%,
      rgb(4 8 16) 100%
    );
  opacity: 1;
  transition: opacity 4000ms ease;
  user-select: none;
  -webkit-user-select: none;
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
}

.loading-splash--out {
  opacity: 0;
  pointer-events: none;
}

.loading-splash__card {
  width: min(82vw, 880px);
  max-height: min(64dvh, 560px);
  display: flex;
  position: relative;
  align-items: center;
  justify-content: center;
  text-align: center;
  pointer-events: auto;
}

.loading-splash__progress-container {
  position: absolute;
  inset: 0;
}

.loading-splash__logo {
  width: min(82vw, 880px);
  max-height: min(64dvh, 560px);
  object-fit: contain;
  filter: drop-shadow(0 14px 28px rgb(0 0 0 / 56%));
}

.loading-splash__hint {
  position: absolute;
  top: -62px;
  width: 100%;
  color: var(--text-muted);
  font-family: var(--font-ui);
  font-weight: 500;
  font-size: clamp(0.8rem, 2.4vw, 0.94rem);
  line-height: 1.55;
  letter-spacing: 0.02em;
}

.loading-splash__cta-container {
  position: absolute;
  bottom: -56px;
  width: 100%;
}

.loading-splash__progress-label {
  margin: 0 0 12px;
  color: var(--text-muted);
  font-family: var(--font-mono);
  font-size: clamp(0.66rem, 1.8vw, 0.78rem);
  letter-spacing: 0.14em;
  text-transform: uppercase;
}

.loading-splash__progress-track {
  width: min(88vw, 420px);
  height: 8px;
  margin: 0 auto 24px;
  border-radius: 2px;
  overflow: hidden;
  border: 1px solid var(--border-subtle);
  background: rgb(6 14 24 / 80%);
  box-shadow:
    inset 0 1px 3px rgb(0 0 0 / 55%),
    0 2px 8px rgb(0 0 0 / 25%);
}

.loading-splash__progress-fill {
  width: 0%;
  height: 100%;
  border-radius: inherit;
  background: linear-gradient(90deg, var(--accent-blue) 0%, #a8d4ff 100%);
  box-shadow:
    0 0 14px rgb(76 157 224 / 55%),
    inset 0 -1px 0 rgb(0 30 60 / 38%);
  transition: width 180ms ease;
  position: relative;
}

.loading-splash__progress-fill::after {
  content: "";
  position: absolute;
  inset: 0;
  background: repeating-linear-gradient(
    90deg,
    transparent 0px,
    transparent 28px,
    rgb(0 0 0 / 28%) 28px,
    rgb(0 0 0 / 28%) 30px
  );
}

.loading-splash__cta,
.login-screen__login-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 13px 40px;
  border-radius: 3px;
  border: 1px solid rgb(200 230 255 / 44%);
  background: linear-gradient(180deg, #d2e8ff 0%, #b4cce8 100%);
  color: #0e1e30;
  font-family: var(--font-ui);
  font-size: 0.88rem;
  font-weight: 700;
  letter-spacing: 0.18em;
  text-transform: uppercase;
  box-shadow:
    inset 0 1px 0 rgb(255 255 255 / 48%),
    0 6px 18px rgb(0 0 0 / 42%);
  min-width: 210px;
  cursor: pointer;
  position: relative;
  overflow: hidden;
}

.login-screen__login-button--disabled.login-screen__login-button {
  opacity: 0.58;
  cursor: default;
  pointer-events: none;
  color: var(--text-muted);
  background: transparent;
  border: 1px solid var(--border-subtle);
  box-shadow: none;
}

.loading-splash__cta::before,
.login-screen__login-button::before {
  content: "";
  position: absolute;
  top: 0;
  left: -100%;
  width: 60%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgb(255 255 255 / 28%),
    transparent
  );
  transition: left 0s;
}

.login-screen__login-button--disabled.login-screen__login-button::before {
  display: none !important;
}

.loading-splash__cta--hidden {
  display: none;
}

.loading-splash__cta:disabled {
  opacity: 0.58;
  cursor: default;
}

.loading-splash__cta:not(:disabled) {
  animation: loading-splash-pulse 2.4s ease-in-out infinite;
}

.loading-splash__cta:not(:disabled):hover::before {
  left: 160%;
  transition: left 600ms ease;
}

.loading-splash__cta:active:not(:disabled) {
  transform: translateY(1px);
}

.loading-splash__username-input,
.login-screen__username-input {
  display: block;
  width: min(100%, 280px);
  margin: 0 auto 16px;
  padding: 10px 14px;
  background: rgba(6, 14, 24, 0.85);
  border: 1px solid var(--border-subtle);
  border-radius: 4px;
  color: var(--text-bright);
  font-family: var(--font-ui);
  font-size: 1rem; /* ≥16px prevents iOS Safari zoom-on-focus */
  text-align: center;
  transition:
    border-color 0.2s,
    box-shadow 0.2s;
  outline: none;
  pointer-events: auto;
}

.loading-splash__username-input:focus,
.login-screen__username-input:focus {
  border-color: var(--accent-blue);
  box-shadow: 0 0 10px rgba(76, 157, 224, 0.3);
}

.loading-splash__username-input::placeholder,
.login-screen__username-input::placeholder {
  color: var(--text-muted);
  opacity: 0.6;
}

@keyframes loading-splash-pulse {
  0%,
  100% {
    opacity: 1;
    box-shadow:
      inset 0 1px 0 rgb(255 255 255 / 48%),
      0 6px 18px rgb(0 0 0 / 42%),
      0 0 0 0 rgb(160 210 255 / 0%);
  }
  50% {
    opacity: 0.82;
    box-shadow:
      inset 0 1px 0 rgb(255 255 255 / 48%),
      0 6px 18px rgb(0 0 0 / 38%),
      0 0 16px 2px rgb(100 170 240 / 22%);
  }
}

/* ─── Intro splash ───────────────────────────────────────────────────────────── */

.intro-splash {
  position: absolute;
  inset: 0;
  z-index: 12;
  display: flex;
  align-items: center;
  justify-content: center;
  background: radial-gradient(
    circle at 50% 38%,
    rgb(26 44 66 / 2%) 0%,
    rgb(8 14 22 / 8%) 58%,
    rgb(4 8 14 / 14%) 100%
  );
  pointer-events: none;
  opacity: 1;
  transition: opacity 8000ms linear;
}

.intro-splash--fading {
  opacity: 0;
}

.intro-splash__logo {
  width: min(82vw, 880px);
  max-height: min(64dvh, 560px);
  object-fit: contain;
  filter: drop-shadow(0 14px 24px rgb(0 0 0 / 48%));
}

.intro-splash--hidden {
  display: none;
}

/* ─── Run-end overlay ────────────────────────────────────────────────────────── */

.run-end-overlay {
  position: fixed;
  inset: 0;
  width: 100dvw;
  height: 100dvh;
  z-index: 14;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  padding: 24px;
  pointer-events: none;
  user-select: none;
  -webkit-user-select: none;
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
  opacity: 0;
  background: radial-gradient(
    ellipse at 50% 50%,
    rgba(0, 0, 0, 0.02) 0%,
    rgba(0, 0, 0, 0.08) 50%,
    rgba(0, 0, 0, 0.94) 100%
  );
  transition: opacity 650ms ease;
}

.run-end-overlay--hidden {
  display: none;
}

.run-end-overlay--visible {
  opacity: 1;
  pointer-events: auto;
}

.run-end-overlay__card {
  width: min(92vw, 640px);
  padding: clamp(20px, 3vw, 32px);
  text-align: center;
  background: linear-gradient(
    160deg,
    rgb(14 26 42 / 94%) 0%,
    rgb(7 13 22 / 96%) 100%
  );
  border: 1px solid var(--border-subtle);
  box-shadow:
    0 32px 56px rgb(0 0 0 / 56%),
    inset 0 1px 0 rgb(200 230 255 / 12%);
  position: relative;
  /* corner notch effect */
  clip-path: polygon(
    0 0,
    calc(100% - 20px) 0,
    100% 20px,
    100% 100%,
    20px 100%,
    0 calc(100% - 20px)
  );
}

/* won accent — green top bar */
.run-end-overlay.is-won .run-end-overlay__card {
  border-color: rgb(82 204 126 / 42%);
  box-shadow:
    0 32px 56px rgb(0 0 0 / 56%),
    inset 0 1px 0 rgb(82 204 126 / 18%),
    0 0 40px rgb(52 180 100 / 8%);
}

.run-end-overlay.is-won .run-end-overlay__card::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(
    90deg,
    transparent 0%,
    var(--accent-green) 30%,
    var(--accent-green) 70%,
    transparent 100%
  );
  box-shadow: 0 0 12px rgb(82 204 126 / 60%);
}

/* failed accent — red top bar */
.run-end-overlay.is-failed .run-end-overlay__card {
  border-color: rgb(217 72 72 / 42%);
  box-shadow:
    0 32px 56px rgb(0 0 0 / 56%),
    inset 0 1px 0 rgb(217 72 72 / 16%),
    0 0 40px rgb(180 40 40 / 8%);
}

.run-end-overlay.is-failed .run-end-overlay__card::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(
    90deg,
    transparent 0%,
    var(--accent-red) 30%,
    var(--accent-red) 70%,
    transparent 100%
  );
  box-shadow: 0 0 12px rgb(217 72 72 / 60%);
}

.run-end-overlay__logo {
  width: min(84vw, 520px);
  max-height: min(34dvh, 240px);
  object-fit: contain;
  filter: drop-shadow(0 10px 18px rgb(0 0 0 / 44%));
}

.run-end-overlay__title {
  margin: 10px 0 8px;
  font-family: var(--font-ui);
  font-size: clamp(1.3rem, 2.8vw, 1.9rem);
  font-weight: 700;
  letter-spacing: 0.16em;
  text-transform: uppercase;
  color: var(--text-bright);
}

.run-end-overlay.is-won .run-end-overlay__title {
  color: #8ef0b2;
  text-shadow: 0 0 20px rgb(82 204 126 / 32%);
}

.run-end-overlay.is-failed .run-end-overlay__title {
  color: #f09090;
  text-shadow: 0 0 20px rgb(217 72 72 / 28%);
}

.run-end-overlay__message {
  margin: 0;
  color: var(--text-muted);
  font-family: var(--font-ui);
  font-weight: 500;
  font-size: clamp(0.88rem, 1.6vw, 1.05rem);
  line-height: 1.5;
}

.run-end-overlay__restart,
.login-screen__logout-button {
  margin-top: 20px;
  padding: 10px 28px;
  border-radius: 3px;
  border: 1px solid rgb(200 230 255 / 30%);
  background: linear-gradient(180deg, #cfe0f5 0%, #b0c8e2 100%);
  color: #0e1e2e;
  font-family: var(--font-ui);
  font-size: 0.84rem;
  font-weight: 700;
  letter-spacing: 0.14em;
  text-transform: uppercase;
  cursor: pointer;
  clip-path: polygon(
    0 0,
    calc(100% - 8px) 0,
    100% 8px,
    100% 100%,
    8px 100%,
    0 calc(100% - 8px)
  );
  box-shadow: 0 4px 14px rgb(0 0 0 / 32%);
  transition:
    filter 120ms ease,
    transform 90ms ease;
}

.run-end-overlay__restart:hover,
.login-screen__logout-button:hover {
  filter: brightness(1.06);
}

.run-end-overlay__restart:active,
.login-screen__logout-button:active {
  transform: translateY(1px);
}

/* ─── Cabin chrome ───────────────────────────────────────────────────────────── */

.cabin-chrome {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 3;
  overflow: hidden;
}

.cabin-chrome::before {
  content: "";
  position: absolute;
  inset: 0;
  background:
    radial-gradient(
      130% 110% at 50% -12%,
      rgb(0 0 0 / 36%) 0%,
      transparent 47%
    ),
    radial-gradient(
      120% 125% at 50% 50%,
      transparent 60%,
      rgb(0 0 0 / 42%) 100%
    );
}

.cabin-chrome__roof {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: clamp(34px, 6.8dvh, 84px);
  background:
    linear-gradient(180deg, #48525d 0%, #2e363f 48%, #161c22 100%),
    repeating-linear-gradient(
      90deg,
      rgb(255 255 255 / 3%) 0 14px,
      rgb(0 0 0 / 0%) 14px 28px
    );
  box-shadow:
    inset 0 -1px 0 rgb(209 228 246 / 20%),
    0 14px 24px rgb(0 0 0 / 42%);
}

.cabin-chrome__roof::after {
  content: "";
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  bottom: 8px;
  width: min(72vw, 760px);
  height: 2px;
  background: linear-gradient(
    90deg,
    rgb(145 167 188 / 0%) 0%,
    rgb(184 206 228 / 58%) 50%,
    rgb(145 167 188 / 0%) 100%
  );
}

.cabin-chrome__pillar {
  position: absolute;
  top: 0;
  bottom: clamp(30px, 5.6dvh, 74px);
  width: clamp(10px, 2vw, 24px);
  background:
    linear-gradient(180deg, #4a545f 0%, #283039 44%, #12171d 100%),
    repeating-linear-gradient(
      180deg,
      rgb(255 255 255 / 3%) 0 11px,
      rgb(0 0 0 / 0%) 11px 22px
    );
  box-shadow:
    inset -1px 0 0 rgb(224 239 255 / 9%),
    inset 0 0 0 1px rgb(0 0 0 / 48%),
    0 10px 16px rgb(0 0 0 / 34%);
}

.cabin-chrome__pillar--left {
  left: 0;
  clip-path: polygon(0 0, 100% 10%, 100% 100%, 0 100%);
}

.cabin-chrome__pillar--right {
  right: 0;
  clip-path: polygon(0 10%, 100% 0, 100% 100%, 0 100%);
}

.cabin-chrome__sill {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  height: clamp(30px, 5.6dvh, 74px);
  background:
    linear-gradient(180deg, #39434e 0%, #202730 54%, #10141a 100%),
    repeating-linear-gradient(
      90deg,
      rgb(255 255 255 / 3%) 0 16px,
      rgb(0 0 0 / 0%) 16px 30px
    );
  box-shadow:
    inset 0 1px 0 rgb(205 226 247 / 20%),
    0 -10px 24px rgb(0 0 0 / 46%);
}

.cabin-chrome__sill::before {
  content: "";
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  bottom: 0;
  width: clamp(120px, 32vw, 420px);
  height: clamp(16px, 3dvh, 40px);
  border-top-left-radius: 42% 100%;
  border-top-right-radius: 42% 100%;
  background: linear-gradient(180deg, #4e5a68 0%, #1b222b 56%, #0d1116 100%);
  box-shadow:
    inset 0 1px 0 rgb(224 240 255 / 20%),
    0 -8px 20px rgb(0 0 0 / 40%);
}

.cabin-chrome__glass-sheen {
  position: absolute;
  top: clamp(40px, 7dvh, 88px);
  left: clamp(14px, 2.8vw, 36px);
  right: clamp(14px, 2.8vw, 36px);
  bottom: clamp(34px, 6.4dvh, 90px);
  border-radius: clamp(10px, 2.6vw, 24px);
  background:
    linear-gradient(
      118deg,
      rgb(255 255 255 / 22%) 0%,
      rgb(255 255 255 / 5%) 14%,
      transparent 34%
    ),
    linear-gradient(
      66deg,
      transparent 62%,
      rgb(189 222 255 / 10%) 78%,
      transparent 100%
    );
  opacity: 0.52;
}

/* ─── HUD ────────────────────────────────────────────────────────────────────── */

.hud {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 5;
}

/* Status banner — angular instrument style */
.hud-status-banner {
  position: absolute;
  top: 200px;
  left: 32px;
  max-width: min(74vw, 720px);
  padding: 7px 18px 7px 20px;
  border: 1px solid var(--border-subtle);
  border-left: 3px solid var(--accent-blue);
  border-radius: 2px;
  background: rgb(9 18 30 / 72%);
  color: var(--text-primary);
  text-align: center;
  font-family: var(--font-ui);
  font-weight: 600;
  font-size: clamp(0.72rem, 1.2vw, 0.88rem);
  line-height: 1.2;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  text-shadow: 0 1px 4px rgb(0 0 0 / 40%);
  box-shadow:
    0 8px 20px rgb(0 0 0 / 28%),
    inset 0 1px 0 rgb(160 210 255 / 8%);
  backdrop-filter: blur(3px);
}

.hud-status-banner.is-running {
  border-left-color: var(--accent-blue);
  background: rgb(9 20 34 / 72%);
}

.hud-status-banner.is-won {
  border-left-color: var(--accent-green);
  border-color: rgb(82 204 126 / 28%);
  background: rgb(6 28 18 / 78%);
  color: rgb(180 248 208 / 98%);
  box-shadow:
    0 8px 20px rgb(0 0 0 / 28%),
    0 0 20px rgb(52 180 100 / 12%);
}

.hud-status-banner.is-failed {
  border-left-color: var(--accent-red);
  border-color: rgb(217 72 72 / 28%);
  background: rgb(38 8 8 / 78%);
  color: rgb(255 216 216 / 99%);
  box-shadow:
    0 8px 20px rgb(0 0 0 / 28%),
    0 0 20px rgb(180 40 40 / 12%);
}

/* Preview cluster (minimap region) */
.hud-preview-cluster {
  position: absolute;
  top: 64px;
  left: 32px;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 10px;
}

/* Speed display */
.hud-speed {
  margin: 0;
  display: flex;
  align-items: baseline;
  gap: 5px;
  color: var(--text-bright);
  line-height: 1;
}

.hud-speed-floating {
  position: absolute;
  top: 8px;
  right: 8px;
}

.hud-speed-value {
  font-family: var(--font-ui);
  font-size: clamp(1.7rem, 3.2vw, 2.4rem);
  font-weight: 400;
  font-variant-numeric: tabular-nums;
  color: var(--text-bright);
  text-shadow: 0 0 18px rgb(180 220 255 / 24%);
}

.hud-speed-unit {
  font-family: var(--font-ui);
  font-weight: 600;
  font-size: clamp(0.72rem, 1.4vw, 0.88rem);
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: var(--text-bright);
  margin-bottom: 3px;
}

/* Minimap */
.minimap-canvas {
  width: min(260px, 33vw);
  height: 118px;
  border-radius: 3px;
  border: none;
  background: linear-gradient(
    180deg,
    rgba(40, 56, 78, 0.24) 0%,
    rgb(20 36 60 / 0%) 100%
  );
  box-shadow:
    0 0 0 1px var(--border-subtle),
    0 4px 12px rgb(0 0 0 / 22%);
}

.username-display,
.hud-settings-btn {
  position: fixed;
  top: 14px;
  background: rgba(15, 25, 40, 0.85);
  border-radius: 4px;
  border: 1px solid var(--border-subtle);
  color: var(--text-muted);
  cursor: pointer;
  pointer-events: auto;
  touch-action: none;
  box-shadow:
    0 0 0 1px var(--border-subtle),
    0 4px 12px rgb(0 0 0 / 22%);
  transition:
    color 0.2s,
    background 0.2s;
  z-index: 10;
}

.username-display {
  left: 32px;
  padding: 6px 12px;
  font-size: 0.84rem;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.06em;
  user-select: none;
  -webkit-user-select: none;
  -webkit-tap-highlight-color: transparent;
}

.hud-settings-btn {
  right: 32px;
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
}

.username-display:hover,
.hud-settings-btn:hover {
  color: var(--text-bright);
  background: rgba(25, 40, 65, 0.95);
}

.username-display::before {
  display: none;
}

.login-screen {
  position: fixed;
  inset: 0;
  width: 100dvw;
  height: 100dvh;
  background: radial-gradient(
    ellipse at 50% 50%,
    rgba(0, 0, 0, 0.02) 0%,
    rgba(0, 0, 0, 0.08) 50%,
    rgba(0, 0, 0, 0.94) 100%
  );
  z-index: 100;
  pointer-events: none;
  user-select: none;
  -webkit-user-select: none;
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
  opacity: 1;
  transition: opacity 400ms ease;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
}

.login-screen--hidden {
  opacity: 0;
  pointer-events: none;
  z-index: -1;
}

.login-screen--visible {
  opacity: 1;
  pointer-events: auto;
  z-index: 100;
}

.login-screen__card {
  width: min(92vw, 240px);
  max-height: min(74dvh, 560px);
  display: flex;
  padding: 16px;
  flex-direction: column;
  position: relative;
  align-items: center;
  justify-content: center;
  text-align: center;
  pointer-events: auto;
  background: rgb(6 14 24 / 80%);
  border: 1px solid var(--border-subtle);
  border-radius: 4px;
  box-shadow:
    0 8px 18px rgb(0 0 0 / 36%),
    inset 0 1px 0 rgb(255 255 255 / 60%);
}

/* Speed-limit sign */
.speed-limit-sign {
  position: absolute;
  top: 72px;
  right: 32px;
  align-self: flex-start;
  width: clamp(42px, 8.5vw, 68px);
  min-height: 76px;
  border-radius: 4px;
  padding: 8px 7px 8px;
  background: #f8faff;
  color: #0d0d0d;
  border: 4px solid #111;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  box-shadow:
    0 8px 18px rgb(0 0 0 / 36%),
    inset 0 1px 0 rgb(255 255 255 / 60%);
}

.speed-limit-label {
  font-family: var(--font-ui);
  font-size: 0.48rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.06em;
  line-height: 1.2;
}

.speed-limit-value {
  margin-top: 5px;
  font-family: var(--font-ui);
  font-size: clamp(1.45rem, 3vw, 1.9rem);
  font-weight: 400;
  line-height: 1;
  font-variant-numeric: tabular-nums;
}

.speed-limit-unit {
  margin-top: 4px;
  font-family: var(--font-ui);
  font-size: 0.52rem;
  font-weight: 700;
  letter-spacing: 0.08em;
  text-transform: uppercase;
}

/* Time cluster */
.hud-time-cluster {
  position: absolute;
  top: 72px;
  right: 110px;
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 2px;
  background: rgb(9 18 30 / 72%);
  border: 1px solid var(--border-subtle);
  border-radius: 4px;
  padding: 8px 12px;
  box-shadow:
    0 8px 18px rgb(0 0 0 / 36%),
    inset 0 1px 0 rgb(160 210 255 / 8%);
  backdrop-filter: blur(3px);
}

.hud-time-label {
  font-family: var(--font-ui);
  font-size: 0.55rem;
  font-weight: 700;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.1em;
  line-height: 1;
}

.hud-time-value {
  font-family: var(--font-mono);
  font-size: 1.1rem;
  font-weight: 400;
  color: var(--text-bright);
  line-height: 1;
  font-variant-numeric: tabular-nums;
  margin-bottom: 6px;
}

.hud-time-label--eta {
  color: var(--accent-amber);
  margin-top: 2px;
}

.hud-time-value--eta {
  color: var(--accent-amber);
  margin-bottom: 0;
}

/* Comfort gauge */
.comfort-gauge {
  position: fixed;
  top: 50dvh;
  right: 18px;
  transform: translateY(-50%);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 5px;
  width: 62px;
  color: var(--text-primary);
  text-transform: uppercase;
  letter-spacing: 0.08em;
}

.comfort-gauge-label {
  font-family: var(--font-ui);
  font-size: 0.5rem;
  font-weight: 700;
  letter-spacing: 0.12em;
  color: var(--text-muted);
}

.comfort-gauge-track {
  position: relative;
  width: 22px;
  height: 122px;
  border-radius: 2px;
  background: rgb(5 12 20 / 80%);
  border: 1px solid var(--border-subtle);
  overflow: hidden;
  box-shadow:
    inset 0 1px 3px rgb(0 0 0 / 55%),
    0 3px 10px rgb(0 0 0 / 26%);
}

/* tick marks */
.comfort-gauge-track::after {
  content: "";
  position: absolute;
  inset: 0;
  background: repeating-linear-gradient(
    to top,
    rgb(255 255 255 / 0%) 0 9px,
    rgb(255 255 255 / 20%) 9px 10px,
    rgb(255 255 255 / 0%) 10px 19px,
    rgb(255 255 255 / 8%) 19px 20px
  );
  pointer-events: none;
  z-index: 1;
}

.comfort-gauge-fill {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  height: 100%;
  background: linear-gradient(
    180deg,
    #52cc7e 0%,
    #a8d456 55%,
    #e09640 78%,
    #cc4848 100%
  );
  transition: height 180ms linear;
}

.comfort-gauge-value {
  font-family: var(--font-mono);
  font-size: 0.6rem;
  font-weight: 400;
  font-variant-numeric: tabular-nums;
  color: var(--text-muted);
}

.comfort-gauge.is-warning .comfort-gauge-value {
  color: #f5c84a;
}

.comfort-gauge.is-low .comfort-gauge-value {
  color: #f08080;
}

/* ─── Throttle overlay ───────────────────────────────────────────────────────── */

.throttle-overlay-canvas {
  pointer-events: auto;
}

/* ─── Brake button ───────────────────────────────────────────────────────────── */

.brake-button {
  position: absolute;
  right: max(18px, env(safe-area-inset-right));
  bottom: max(18px, env(safe-area-inset-bottom));
  width: 122px;
  height: 122px;
  border-radius: 999px;
  border: 2px solid rgb(255 200 200 / 60%);
  background:
    radial-gradient(
      circle at 35% 28%,
      rgb(255 155 155 / 36%) 0%,
      transparent 44%
    ),
    linear-gradient(160deg, rgb(195 46 46 / 96%), rgb(88 8 8 / 97%));
  color: #ffeaec;
  font-family: var(--font-ui);
  font-size: 0.84rem;
  font-weight: 700;
  letter-spacing: 0.14em;
  text-transform: uppercase;
  box-shadow:
    inset 0 1px 0 rgb(255 200 200 / 30%),
    inset 0 -3px 10px rgb(40 0 0 / 40%),
    0 0 0 4px rgb(180 30 30 / 18%),
    0 10px 24px rgb(0 0 0 / 44%);
  pointer-events: auto;
  touch-action: none;
  user-select: none;
  -webkit-user-select: none;
  -webkit-tap-highlight-color: transparent;
  cursor: pointer;
  transition:
    transform 90ms ease,
    box-shadow 120ms ease,
    filter 120ms ease;
}

.brake-button.is-pressed {
  transform: translateY(1px) scale(0.97);
  box-shadow:
    inset 0 2px 8px rgb(50 0 0 / 44%),
    inset 0 -1px 0 rgb(255 210 210 / 24%),
    0 0 0 4px rgb(180 30 30 / 14%),
    0 5px 14px rgb(0 0 0 / 34%);
}

.brake-button.is-braking {
  filter: brightness(1.12) saturate(1.2);
  box-shadow:
    inset 0 1px 0 rgb(255 200 200 / 36%),
    inset 0 -3px 10px rgb(40 0 0 / 36%),
    0 0 0 3px rgb(220 90 90 / 38%),
    0 0 22px rgb(220 60 60 / 30%),
    0 12px 24px rgb(0 0 0 / 46%);
}

/* ─── Responsive — tablet ────────────────────────────────────────────────────── */

@media (max-width: 1023px) {
  .cabin-chrome__roof {
    height: clamp(30px, 5.6dvh, 62px);
  }

  .cabin-chrome__pillar {
    bottom: clamp(28px, 5.2dvh, 62px);
    width: clamp(8px, 1.8vw, 16px);
  }

  .cabin-chrome__sill {
    height: clamp(28px, 5.2dvh, 62px);
  }

  .cabin-chrome__sill::before {
    width: clamp(108px, 30vw, 300px);
    height: clamp(12px, 2.5dvh, 28px);
  }

  .cabin-chrome__glass-sheen {
    top: clamp(34px, 5.8dvh, 74px);
    left: clamp(10px, 2.1vw, 22px);
    right: clamp(10px, 2.1vw, 22px);
    bottom: clamp(28px, 5.2dvh, 64px);
  }

  .hud-status-banner {
    top: 152px;
    left: 12px;
    max-width: min(80vw, 620px);
    padding: 6px 14px 6px 16px;
    font-size: clamp(0.64rem, 1.25vw, 0.8rem);
  }

  .hud-preview-cluster {
    top: 48px;
    left: 12px;
    gap: 8px;
  }

  .hud-speed-floating {
    top: 7px;
    right: 7px;
  }

  .hud-speed-value {
    font-size: clamp(1.35rem, 2.9vw, 1.95rem);
  }

  .hud-speed-unit {
    font-size: clamp(0.66rem, 1.35vw, 0.82rem);
  }

  .minimap-canvas {
    width: min(218px, 30vw);
    height: 98px;
  }

  .username-display {
    position: fixed;
    top: 12px;
    left: 12px;
    right: auto;
    font-size: 0.84rem;
    font-weight: 500;
    color: var(--text-muted);
    cursor: pointer;
  }

  .username-display:hover {
    color: var(--text-bright);
  }

  .hud-settings-btn {
    top: 8px;
    right: 12px;
  }

  .speed-limit-sign {
    top: 84px;
    right: 12px;
    width: clamp(38px, 7.3vw, 56px);
    min-height: 62px;
    border-width: 3px;
    padding: 6px 5px;
    border-radius: 3px;
  }

  .speed-limit-label {
    font-size: 0.42rem;
  }

  .speed-limit-value {
    margin-top: 4px;
    font-size: clamp(1.05rem, 2.5vw, 1.45rem);
  }

  .speed-limit-unit {
    margin-top: 2px;
    font-size: 0.44rem;
  }

  .hud-time-cluster {
    top: 84px;
    right: 80px;
    padding: 6px 10px;
  }

  .hud-time-label {
    font-size: 0.5rem;
  }

  .hud-time-value {
    font-size: 0.95rem;
    margin-bottom: 4px;
  }

  .comfort-gauge {
    top: 50dvh;
    right: 12px;
    width: 50px;
    gap: 4px;
  }

  .comfort-gauge-track {
    width: 18px;
    height: 92px;
  }

  .comfort-gauge-value {
    font-size: 0.52rem;
  }

  .brake-button {
    right: max(12px, env(safe-area-inset-right));
    bottom: max(12px, env(safe-area-inset-bottom));
    width: min(20vw, 92px);
    height: min(20vw, 92px);
    min-width: 72px;
    min-height: 72px;
    font-size: clamp(0.66rem, 1.8vw, 0.78rem);
    letter-spacing: 0.1em;
  }
}

/* ─── Responsive — mobile ────────────────────────────────────────────────────── */

@media (max-width: 720px) {
  .hud-status-banner {
    top: 128px;
    left: 8px;
    max-width: min(94vw, 620px);
    padding: 5px 10px 5px 12px;
    font-size: clamp(0.58rem, 2.2vw, 0.72rem);
  }

  .hud-preview-cluster {
    top: 36px;
    left: 8px;
    gap: 6px;
  }

  .hud-speed-floating {
    top: 32px;
    right: 8px;
  }

  .minimap-canvas {
    width: min(178px, 50vw);
    height: 82px;
  }

  .loading-splash__cta-container {
    bottom: -72px;
  }

  .username-display {
    position: fixed;
    top: 10px;
    left: 8px;
    right: auto;
    font-size: 0.84rem;
    font-weight: 500;
    color: var(--text-muted);
    cursor: pointer;
  }

  .username-display:hover {
    color: var(--text-bright);
  }

  .hud-settings-btn {
    top: 10px;
    right: 8px;
  }

  .speed-limit-sign {
    top: 62px;
    right: 8px;
    width: 56px;
    min-height: 72px;
    border-width: 3px;
    padding: 6px 4px;
  }

  .speed-limit-label {
    font-size: 0.4rem;
  }

  .speed-limit-value {
    margin-top: 4px;
    font-size: clamp(0.95rem, 4vw, 1.25rem);
  }

  .speed-limit-unit {
    margin-top: 2px;
    font-size: 0.42rem;
  }

  .hud-time-cluster {
    top: 62px;
    right: 70px;
    padding: 5px 8px;
  }

  .hud-time-label {
    font-size: 0.45rem;
  }

  .hud-time-value {
    font-size: 0.85rem;
    margin-bottom: 3px;
  }

  .comfort-gauge {
    top: 50dvh;
    right: 8px;
    width: 46px;
  }

  .comfort-gauge-track {
    width: 16px;
    height: 80px;
  }

  .brake-button {
    right: max(8px, env(safe-area-inset-right));
    bottom: max(8px, env(safe-area-inset-bottom));
    width: min(10vw, 72px);
    height: min(10vw, 72px);
    min-width: 64px;
    min-height: 64px;
    font-size: clamp(0.6rem, 2.4vw, 0.72rem);
  }
}

/* Loading Splash Additions */
.loading-splash__header {
  position: absolute;
  top: 24px;
  left: 24px;
  right: 24px;
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  z-index: 10;
  pointer-events: none;
}

.loading-splash__credits-btn {
  pointer-events: auto;
  background: none;
  border: none;
  color: rgba(255, 255, 255, 0.7);
  font-family: inherit;
  font-size: 14px;
  cursor: pointer;
  text-transform: uppercase;
  letter-spacing: 1px;
  transition: color 0.2s;
  padding: 8px;
  text-shadow: 0 1px 4px rgba(0, 0, 0, 0.5);
}

.loading-splash__credits-btn:hover {
  color: white;
}

.loading-splash__settings-btn {
  pointer-events: auto;
  background: none;
  border: none;
  color: rgba(255, 255, 255, 0.7);
  cursor: pointer;
  transition: color 0.2s;
  padding: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  filter: drop-shadow(0 1px 4px rgba(0, 0, 0, 0.5));
}

.loading-splash__settings-btn:hover {
  color: white;
}

.loading-splash__page {
  display: none;
  position: absolute;
  top: 0;
  left: 0;
  width: 100dvw;
  height: 100dvh;
  background: rgba(10, 10, 15, 0.95);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  color: white;
  z-index: 5;
  overflow: hidden;
  padding: 20dvh 4dvw 4dvw 4dvw;
  flex-direction: column;
}

.loading-splash__page--visible {
  display: flex;
}

.loading-splash__page-title {
  margin: 0 0 4dvh 0;
  font-size: clamp(24px, 5dvh, 32px);
  font-weight: bold;
  text-transform: uppercase;
  letter-spacing: 2px;
}

.loading-splash__page-content {
  width: 100%;
  height: 100%;
  margin: 0;
  display: flex;
  flex-direction: column;
}

/* Settings Page Layout */
.settings-layout {
  display: flex;
  flex-direction: row;
  gap: 4dvw;
  width: 100%;
  height: 100%;
  flex: 1;
}

@media (max-width: 768px) {
  .settings-layout {
    flex-direction: column;
    gap: 2dvh;
  }

  .loading-splash__page {
    padding-top: 10dvh;
  }
}

.settings-panel {
  flex: 1;
  background: rgba(20, 20, 25, 0.6);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 12px;
  padding: 4dvh 3dvw;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 0;
}

.settings-panel--compact {
  flex: 0 1 auto;
  padding: 32px;
}

.settings-panel h3 {
  margin-top: 0;
  font-size: clamp(16px, 3dvh, 20px);
  text-transform: uppercase;
  letter-spacing: 1px;
  color: #fff;
}

.settings-panel--compact h3 {
  font-size: 18px;
}

/* Throttle Assembly Sliders */
.throttle-sliders {
  display: flex;
  justify-content: space-around;
  align-items: center;
  flex: 1;
  width: 100%;
  min-height: 0;
}

.settings-panel--compact .throttle-sliders {
  flex: unset;
}

.throttle-slider-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  flex: 1;
}

.settings-panel--compact .throttle-slider-container {
  height: auto;
}

.throttle-slider-wrapper {
  position: relative;
  height: 40dvh;
  width: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.settings-panel--compact .throttle-slider-wrapper {
  height: 180px;
}

.throttle-slider {
  transform: rotate(-90deg);
  width: 40dvh;
  height: 40px;
  margin: 0;
  cursor: pointer;
  appearance: none;
  -webkit-appearance: none;
  background: transparent;
}

.settings-panel--compact .throttle-slider {
  width: 180px;
}

.throttle-slider:focus {
  outline: none;
}

.throttle-slider::-webkit-slider-runnable-track {
  width: 100%;
  height: 8px;
  background: #bababa;
  border-radius: 4px;
  border: 1px solid #333;
  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.8);
}

.throttle-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  height: 36px;
  width: 16px;
  background: linear-gradient(to right, #e0e0e0, #ffffff);
  border-radius: 3px;
  margin-top: -14px;
  border: 1px solid #999;
  box-shadow:
    -2px 0 5px rgba(0, 0, 0, 0.5),
    inset 0 0 2px rgba(255, 255, 255, 0.8);
}

.throttle-slider::-moz-range-track {
  width: 100%;
  height: 8px;
  background: #bababa;
  border-radius: 4px;
  border: 1px solid #333;
  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.8);
}

.throttle-slider::-moz-range-thumb {
  height: 36px;
  width: 16px;
  background: linear-gradient(to right, #e0e0e0, #ffffff);
  border-radius: 3px;
  border: 1px solid #999;
  box-shadow:
    -2px 0 5px rgba(0, 0, 0, 0.5),
    inset 0 0 2px rgba(255, 255, 255, 0.8);
}

.throttle-slider-label {
  margin-top: 16px;
  font-size: 12px;
  text-transform: uppercase;
  color: #a0a0b0;
  font-weight: bold;
  letter-spacing: 0.5px;
  text-align: center;
}

/* Tutorial Content */
.tutorial-content {
  flex: 1;
  overflow-y: auto;
  min-height: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.tutorial-content p {
  line-height: 1.6;
  color: #d0d0e0;
  font-size: clamp(13px, 1.8dvh, 16px);
}

.tutorial-content strong {
  color: #fff;
}

.settings-panel__content {
  display: flex;
  flex-direction: row;
  align-items: flex-start;
  justify-content: space-around;
  width: 100%;
  gap: 32px;
}

.settings-panel__section {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  flex: 1;
  width: 100%;
}

@media (max-width: 650px) and (orientation: portrait) {
  .settings-panel__content {
    flex-direction: column;
    gap: 24px;
  }
}
